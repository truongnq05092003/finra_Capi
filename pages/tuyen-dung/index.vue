<template>
  <div class="">
    <!--  Start innerHeader  -->
    <header class="tc-innerHeader-st1">
      <div class="container">
        <div class="fs-6 fw-600">Tuyển dụng</div>
        <div class="title col-lg-8 mt-20">
          <h1 class="fsz-50 fw-600" style="line-height: normal">
            Chúng tôi luôn tìm kiếm những thành viên
            <span class="text-gradient-purple">ưu tú</span> đồng hành cùng tạo
            nên <span class="text-gradient-purple">giá trị vững chắc.</span>
          </h1>
        </div>
        <div class="info mt-30">
          <div class="row">
            <div class="col-lg-8">
              <div
                class="text fsz-16 fw-500"
                stye="color: rgba(0, 0, 0, 0.77);"
              >
                Đảm bảo môi trường làm việc chuyên nghiệp và thăng tiến
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <!--  End innerHeader  -->
    <main>
      <!--  Start section  -->
      <section class="tc-main-img-st19">
        <div class="img">
          <img
            src="/resource1/inner_pages/assets/img/careers/tuyendung.png"
            alt=""
            class="img-cover"
          />
        </div>
      </section>
      <!--  End section  -->

      <!--  Start section  -->
      <section class="tc-info-st19 mt-150">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-lg-8">
              <h2 class="fsz-50 mb-2 fw-600">Đồng hành cùng chúng tôi</h2>
              <span class="fsz-16 text-purple fw-500 mt-1"> Sự nghiệp </span>
              <div
                class="text fsz-16 mt-30 fw-500"
                style="color: rgba(0, 0, 0, 0.77)"
              >
                Đồng hành cùng chúng tôi, tạo nên những làn sóng mới trong lĩnh
                vực công nghệ. Chúng tôi đang tìm kiếm những ứng viên sáng tạo,
                đam mê. Nếu bạn muốn trở thành một phần của đội ngũ tài năng,
                năng động và luôn hướng tới tương lai, hãy gửi CV của bạn cho
                chúng tôi. Chúng tôi tự hào là một trong những công ty tiên
                phong trong việc áp dụng công nghệ đầu tư tài chính vào lĩnh vực
                tưởng chừng như khó khăn nhất.
              </div>
              <div class="row justify-content-between">
                <div class="col-lg-6">
                  <div
                    class="text fsz-16 mt-30 fw-500"
                    style="color: rgba(0, 0, 0, 0.77)"
                  >
                    Chúng tôi biết rằng lựa chọn một môi trường làm việc đảm bảo
                    chuyên môn và có các phúc lợi hấp dẫn là điều mong muốn của
                    các ứng viên. Vì vậy chúng tôi, ở đây, để đảm bảo điều đó
                    cho các bạn. Cùng đồng hành với chúng tôi trên con đường đầu
                    tư tài chính đầy hấp dẫn và tạo ra giá trị to lớn.
                  </div>
                </div>
                <div class="col-lg-5">
                  <div
                    class="text fsz-16 mt-30 fw-500"
                    style="color: rgba(0, 0, 0, 0.77)"
                  >
                    Dưới đây là các vị trí mà chúng tôi đang tìm kiếm.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!--  End section  -->
      <!--  Start section  -->
      <section class="tc-careers-st19">
        <div class="container">
          <div class="title mb-80">
            <div class="row justify-content-between align-items-center">
              <div class="col-lg-6">
                <h2 class="fsz-50 fw-600" style="line-height: 64px">
                  Vị trí <span class="text-gradient-blue">ứng tuyển</span>
                </h2>
              </div>
              <div class="col-lg-4">
                <div
                  class="text fsz-16 mt-2 mt-lg-0 fw-500"
                  style="color: rgba(0, 0, 0, 0.77)"
                >
                  Bằng cả tâm huyết và sự kỳ vọng lớn lao vào những vị trí vô
                  cùng quan trọng
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex flex-column" style="gap: 32px">
            <div
              class="d-flex align-items-center justify-content-between"
            >
              <div class="d-flex align-items-center" style="gap: 60px">
                <p class="text-time" style="width: 24.77px">01</p>
                <div class="logo-icon">
                  <img
                    src="../../public/resource1/common/img/icon-logo.svg"
                    alt=""
                    class=""
                  />
                </div>
                <div class="d-flex flex-column" style="gap: 20px">
                  <span class="text-title">Giám đốc Vùng</span>
                  <span class="text-time">(Full-Time)</span>
                </div>
              </div>
              <button class="text-apply">Ứng tuyển</button>
            </div>
            <div
              class="d-flex align-items-center justify-content-between"
            >
              <div class="d-flex align-items-center" style="gap: 60px">
                <p class="text-time">02</p>
                <div class="logo-icon">
                  <img
                    src="../../public/resource1/common/img/icon-logo.svg"
                    alt=""
                    class=""
                  />
                </div>
                <div class="d-flex flex-column" style="gap: 20px">
                  <span class="text-title">Trưởng phòng kinh doanh</span>
                  <span class="text-time">(Full-Time)</span>
                </div>
              </div>
              <button class="text-apply">Ứng tuyển</button>
            </div>
            <div
              class="d-flex align-items-center justify-content-between"
            >
              <div class="d-flex align-items-center" style="gap: 60px">
                <p class="text-time">03</p>
                <div class="logo-icon">
                  <img
                    src="../../public/resource1/common/img/icon-logo.svg"
                    alt=""
                    class=""
                  />
                </div>
                <div class="d-flex flex-column" style="gap: 20px">
                  <span class="text-title"
                    >Chuyên viên Nghiên cứu & Phát triển sản phẩm</span
                  >
                  <span class="text-time">(Full-Time)</span>
                </div>
              </div>
              <button class="text-apply">Ứng tuyển</button>
            </div>
            <div
              class="d-flex align-items-center justify-content-between"
            >
              <div class="d-flex align-items-center" style="gap: 60px">
                <p class="text-time">04</p>
                <div class="logo-icon">
                  <img
                    src="../../public/resource1/common/img/icon-logo.svg"
                    alt=""
                    class=""
                  />
                </div>
                <div class="d-flex flex-column" style="gap: 20px">
                  <span class="text-title">Chuyên viên Quản trị rủi ro</span>
                  <span class="text-time">(Full-Time)</span>
                </div>
              </div>
              <button class="text-apply">Ứng tuyển</button>
            </div>
            <div
              class="d-flex align-items-center justify-content-between"
            >
              <div class="d-flex align-items-center" style="gap: 60px">
                <p class="text-time">05</p>
                <div class="logo-icon">
                  <img
                    src="../../public/resource1/common/img/icon-logo.svg"
                    alt=""
                    class=""
                  />
                </div>
                <div class="d-flex flex-column" style="gap: 20px">
                  <span class="text-title"
                    >Chuyên viên Dịch vụ khách hàng vận hành</span
                  >
                  <span class="text-time">(Full-Time)</span>
                </div>
              </div>
              <button class="text-apply">Ứng tuyển</button>
            </div>
            <div
              class="d-flex align-items-center justify-content-between"
            >
              <div class="d-flex align-items-center" style="gap: 60px">
                <p class="text-time">06</p>
                <div class="logo-icon">
                  <img
                    src="../../public/resource1/common/img/icon-logo.svg"
                    alt=""
                    class=""
                  />
                </div>
                <div class="d-flex flex-column" style="gap: 20px">
                  <span class="text-title">Chuyên viên kinh doanh</span>
                  <span class="text-time">(Full-Time)</span>
                </div>
              </div>
              <button class="text-apply">Ứng tuyển</button>
            </div>
          </div>
          <div class="careers">
            <nuxt-link
              :href="`/tuyen-dung/${job.slug}`"
              class="career-card"
              v-for="(job, index) in joblist"
              :key="index"
            >
              <div class="row">
                <div class="col-lg-1 col-2 d-flex align-items-center">
                  <span class="num"
                    >{{ index < 10 ? "0" + (index + 1) : index + 1 }}
                  </span>
                </div>
                <div class="col-lg-9 col-10">
                  <div class="d-flex gap-5 align-items-center">
                    <div>
                      <img
                        src="../../public/resource1/common/img/frame_logo.svg"
                        alt=""
                      />
                    </div>
                    <div>
                      <div class="inf my-lg-0">
                        <h6 class="fsz-24 mb-2 fw-600">{{ job.name }}</h6>
                      </div>
                      <div class="fsz-16 mt-10 d-none d-lg-block">
                        (Full-Time)
                      </div>
                      <div
                        class="fsz-16 text-gradient-purple fw-600 d-block d-lg-none"
                        style="color: #6d15a2"
                      >
                        Ứng tuyển
                      </div>
                    </div>
                  </div>
                </div>

                <div class="col-lg-2 col-6">
                  <div
                    class="d-flex align-items-center"
                    style="width: 100%; height: 100%; justify-content: end"
                  >
                    <div
                      class="fsz-16 text-lg-end text-gradient-purple fw-600 d-none d-lg-block"
                      style="color: #6d15a2"
                    >
                      Ứng tuyển
                    </div>
                  </div>
                </div>
              </div>
            </nuxt-link>
          </div>
        </div>
      </section>
      <!--  End section  -->
    </main>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from "vue";
import { useNuxtApp } from "#app";
import { JobService } from "~/services/JobService";
import type { JobReviewResponse } from "~/types/JobResponse";
import type { AxiosInstance } from "axios";

// Get Axios instance from Nuxt app context
const { $axios } = useNuxtApp();
const axiosInstance = $axios as AxiosInstance;

// Create an instance of JobService
const jobService = new JobService(axiosInstance);

// Reactive variable to store the job list
const joblist = ref<JobReviewResponse[]>([]);

const getListJob = async () => {
  try {
    const res = await jobService.getListJob();
    if (res.code === 0) {
      joblist.value = res.data;
    } else {
      console.error("Error fetching job list:", res.message);
    }
  } catch (e) {
    console.error("Failed to fetch job list:", e);
  }
};

// Fetch jobs when the component is mounted
onMounted(async () => {
  await getListJob();
});
</script>

<style scoped>
.tc-innerHeader-st1 {
  position: relative;
  padding: 140px 0 40px;
}
.tc-careers-st19 {
  position: relative;
  padding: 140px 0;
}
.tc-careers-st19 .careers {
  position: relative;
  padding: 0 20px;
  border: 1px solid #9993;
}

@media (min-width: 768px) {
  .careers-page-st1 .tc-careers-st19 .careers {
    padding: 0 40px;
  }
}
.tc-careers-st19 .careers .career-card {
  position: relative;
  display: block;
  padding: 50px 0;
  border-bottom: 1px solid #9993;
}
.tc-careers-st19 .careers .career-card:last-of-type {
  border: 0;
}
.tc-careers-st19 .careers .career-card .arrow i {
  font-size: 24px;
  -webkit-transform: rotate(-45deg);
  transform: rotate(-45deg);
}
.tc-careers-st19 .careers .career-card .num {
  width: 30px;
  height: 30px;
  display: -webkit-inline-box;
  display: -ms-inline-flexbox;
  display: inline-flex;
  -webkit-box-align: center;
  -ms-flex-align: center;
  align-items: center;
  -webkit-box-pack: center;
  -ms-flex-pack: center;
  justify-content: center;
  border: 1px solid #9993;
  border-radius: 50%;
}
.tc-careers-st19 .careers .career-card:hover {
  border-color: #151515;
}
.tc-careers-st19 .careers .career-card:hover h6 {
  text-decoration: underline;
}
.logo-icon {
  width: 150px;
  height: 150px;
  background: #000;
  display: flex;
  align-items: center;
  justify-content: center;
}
.text-title {
  font-size: 36px;
  font-weight: 600;
  letter-spacing: 0.2px;
}
.text-time {
  font-size: 20px;
  font-weight: 500;
  letter-spacing: 0.2px;
}
.text-apply {
  color: #6d15a2;
  font-size: 20px;
  font-weight: 700;
  letter-spacing: 0.2px;
}
</style>
